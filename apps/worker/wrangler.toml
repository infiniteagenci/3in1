name = "3in1-worker"
main = "src/index.ts"
compatibility_date = "2025-09-15"
compatibility_flags = ["nodejs_compat","enable_nodejs_process_v2"]

[env.production.vars]
GOOGLE_OAUTH_CLIENT_ID="296576517620-sur4nmf89q803b5h83f1e4m930vrp3tc.apps.googleusercontent.com"
BASE_API_URL="https://3in1-worker.ailabs-hq.workers.dev"
BASE_APP_URL="https://3in1.ai-labs.pro"
SUPERADMIN_EMAIL="infinite.agenci@gmail.com"

# Production environment configuration
[env.production]
name = "3in1-worker"
GOOGLE_OAUTH_CLIENT_ID="296576517620-sur4nmf89q803b5h83f1e4m930vrp3tc.apps.googleusercontent.com"
BASE_API_URL="https://3in1-worker.ailabs-hq.workers.dev"
BASE_APP_URL="https://3in1.ai-labs.pro"


[[env.production.d1_databases]]
binding = "DB"
database_name = "3in1"
database_id = "ea691e25-4a91-4ce2-a192-8b5b03393be4"

# [[env.production.kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id-here"

# Staging environment configuration
[env.staging]
name = "3in1-worker-staging"

[env.staging.vars]
BASE_API_URL="https://3in1-worker-staging.ailabs-hq.workers.dev"
BASE_APP_URL="https://staging.3in1.ai-labs.pro"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "3in1"
database_id = "ea691e25-4a91-4ce2-a192-8b5b03393be4"

# [[env.staging.kv_namespaces]]
# binding = "CACHE"
# id = "your-staging-kv-namespace-id-here"

# Development environment configuration (local)
[env.development]
name = "3in1-worker-dev"
vars = { ENVIRONMENT = "development", BASE_API_URL = "http://localhost:8787", BASE_APP_URL = "http://localhost:4321" }

[[env.development.d1_databases]]
binding = "DB"
database_name = "3in1-dev"
database_id = "fcb0d78a-2431-4210-b0fd-d0f2bc36a9ee"

# Configure D1 database migrations (disable for now to avoid DurableObject warnings)
# [[migrations]]
# tag = "0001_initial_schema"
# new_classes = ["users", "sessions", "profiles", "conversations", "notes"]

# Configure additional worker settings
[build]
command = ""
watch_dir = "src"

# Configure limits and timeouts
# [limits]
# cpu_ms = 50000
